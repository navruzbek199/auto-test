{"version":3,"file":"test-CY07TcBu.js","sources":["../../../../pages/test.vue"],"sourcesContent":["<template>\n  <section class=\"max-w-5xl mx-auto p-6\">\n    <!-- Variantlar ro'yxati -->\n    <div v-if=\"!currentVariant\">\n      <h2 class=\"text-2xl font-bold mb-4 text-white\">Variantlar</h2>\n      <div class=\"grid grid-cols-4 gap-4\">\n        <button\n          v-for=\"variant in mockVariants\"\n          :key=\"variant.id\"\n          @click=\"selectVariant(variant)\"\n          class=\"py-3 rounded-xl shadow text-white bg-blue-600 hover:bg-blue-700 transition\"\n        >\n          Variant {{ variant.id }}\n        </button>\n      </div>\n    </div>\n\n    <!-- Test boshlanganda -->\n    <div v-else>\n      <!-- Header -->\n      <div class=\"flex justify-between items-center mb-4\">\n        <div class=\"text-sm bg-white p-2 rounded\">\n          Variant <span class=\"font-semibold\">{{ currentVariant.id }}</span> —\n          Savol <span class=\"font-semibold\">{{ currentQuestionIndex + 1 }}</span\n          >/<span class=\"font-semibold\">{{ totalQuestions }}</span>\n        </div>\n\n        <div class=\"flex gap-4 items-center\">\n          <div\n            class=\"text-sm font-mono bg-gray-100 px-3 py-1 rounded border border-blue-400\"\n          >\n            {{ formattedTime }}\n          </div>\n          <button\n            @click=\"finishTest()\"\n            class=\"px-3 py-1 rounded bg-red-500 text-white hover:bg-red-600\"\n          >\n            Test tugatish\n          </button>\n        </div>\n      </div>\n\n      <!-- Savol -->\n      <div v-if=\"currentQuestion\" class=\"p-6 bg-white rounded-2xl shadow mb-6\">\n        <h2 class=\"mb-6 font-semibold\">{{ currentQuestion.question }}</h2>\n        <ul class=\"space-y-3\">\n          <li\n            v-for=\"(opt, i) in currentQuestion.options\"\n            :key=\"i\"\n            role=\"button\"\n            @click=\"chooseAnswer(currentQuestion.id, i)\"\n            class=\"p-3 border rounded cursor-pointer transition select-none\"\n            :class=\"optionClass(currentQuestion, i)\"\n          >\n            <span class=\"font-bold mr-3\">F{{ i + 1 }}.</span>\n            {{ opt }}\n          </li>\n        </ul>\n      </div>\n\n      <!-- Pagination (1..25 savollar) -->\n      <div class=\"grid grid-cols-10 gap-2\">\n        <button\n          v-for=\"(q, idx) in currentVariant.questions\"\n          :key=\"q.id\"\n          @click=\"goToQuestion(idx)\"\n          class=\"py-2 rounded border text-sm font-semibold\"\n          :class=\"paginationClass(q, idx)\"\n        >\n          {{ idx + 1 }}\n        </button>\n      </div>\n    </div>\n\n    <!-- Natija modal -->\n    <div\n      v-if=\"showResult\"\n      class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\"\n    >\n      <div class=\"bg-white rounded-lg p-6 w-full max-w-md\">\n        <h3 class=\"text-2xl font-bold mb-2\">Natija</h3>\n        <p class=\"mb-2\">To‘g‘ri javoblar: {{ score }} / {{ totalQuestions }}</p>\n        <p class=\"mb-6\">Foiz: {{ percentage }}%</p>\n\n        <div class=\"flex justify-end gap-3\">\n          <button\n            @click=\"backToVariants\"\n            class=\"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300\"\n          >\n            Ortga\n          </button>\n          <button\n            @click=\"restartSameVariant\"\n            class=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n          >\n            Qayta boshlash\n          </button>\n        </div>\n      </div>\n    </div>\n    <div\n      v-if=\"timeUpModal\"\n      class=\"fixed inset-0 flex items-center justify-center bg-black/50 z-50\"\n    >\n      <div class=\"bg-white rounded-2xl shadow-lg w-[400px] p-6 text-center\">\n        <h2 class=\"text-xl font-bold mb-4\">⏰ Vaqtingiz tugadi!</h2>\n\n        <p class=\"mb-4 text-lg\">\n          Sizning natijangiz:\n          <span class=\"font-bold\">{{ score }} / {{ totalQuestions }}</span>\n          ({{ percentage }}%)\n        </p>\n\n        <button\n          @click=\"backToVariants\"\n          class=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\n        >\n          Variantlarga qaytish\n        </button>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onBeforeUnmount } from \"vue\";\n\ntype Question = {\n  id: number;\n  question: string;\n  options: string[];\n  correct: number;\n};\n\ntype Variant = {\n  id: number;\n  questions: Question[];\n};\n\nconst sampleQuestions = [\n  {\n    q: \"Qaysi belgida to‘xtash taqiqlanadi?\",\n    opts: [\n      \"To‘xtash va turish taqiqlangan\",\n      \"Piyodalar o‘tish joyi\",\n      \"Parkovka joyi\",\n      \"Yonilg‘i quyish shoxobchasi\",\n    ],\n    correct: 0,\n  },\n  {\n    q: \"Svetofor qizil yonib turganda haydovchi nima qilishi kerak?\",\n    opts: [\n      \"To‘xtashi kerak\",\n      \"Tezlikni oshirib o‘tib ketishi kerak\",\n      \"Sariq signalni kutishi kerak\",\n      \"Yo‘lning holatiga qarab harakatlanishi mumkin\",\n    ],\n    correct: 0,\n  },\n  {\n    q: \"Qaysi holatda chapga burilish mumkin?\",\n    opts: [\n      \"Faqat yashil chiroqda\",\n      \"Yashil yoki chapga burilish strelkasi yoqqanda\",\n      \"Har doim to‘xtamasdan\",\n      \"Svetofor ishlamaganida\",\n    ],\n    correct: 1,\n  },\n  {\n    q: \"Haydovchi svetofor ishlamagan joyda qanday harakatlanishi kerak?\",\n    opts: [\n      \"Yo‘l belgilariga amal qilish\",\n      \"Harakatlanmasligi kerak\",\n      \"O‘z xohishiga ko‘ra yurishi mumkin\",\n      \"Tezlikni oshirish kerak\",\n    ],\n    correct: 0,\n  },\n  {\n    q: \"Agar oldindan «To‘xtash taqiqlangan» belgisi bo‘lsa, qayerda to‘xtash mumkin?\",\n    opts: [\n      \"Belgidan keyin 15 metr uzoqlikda\",\n      \"Belgidan oldin 15 metr uzoqlikda\",\n      \"Istalgan joyda\",\n      \"Faqat chorrahada\",\n    ],\n    correct: 1,\n  },\n];\n\nconst mockVariants: Variant[] = Array.from({ length: 20 }, (_, vIndex) => ({\n  id: vIndex + 1,\n  questions: Array.from({ length: 25 }, (_, qIndex) => {\n    // sampleQuestions ichidan aylantirib olish\n    const template = sampleQuestions[qIndex % sampleQuestions.length];\n    return {\n      id: (vIndex + 1) * 1000 + qIndex + 1,\n      question: `Savol ${qIndex + 1}: ${template.q}`,\n      options: template.opts,\n      correct: template.correct,\n    };\n  }),\n}));\n\n/* State */\nconst currentVariant = ref<Variant | null>(null);\nconst currentQuestionIndex = ref(0);\nconst selectedAnswers = ref<Record<number, number | null>>({});\nconst showResult = ref(false);\nconst timeUpModal = ref(false);\n\n/* Timer (25 min) */\nconst TOTAL_SECONDS = 25 * 60;\nconst timeLeft = ref(TOTAL_SECONDS);\nlet timerId: number | null = null;\n\nfunction startTimer() {\n  stopTimer();\n  timeLeft.value = TOTAL_SECONDS;\n  timerId = window.setInterval(() => {\n    if (timeLeft.value > 0) {\n      timeLeft.value--;\n    } else {\n      finishTest();\n    }\n  }, 1000);\n}\nfunction stopTimer() {\n  if (timerId !== null) {\n    clearInterval(timerId);\n    timerId = null;\n  }\n}\nonBeforeUnmount(() => stopTimer());\n\nconst formattedTime = computed(() => {\n  const m = Math.floor(timeLeft.value / 60);\n  const s = timeLeft.value % 60;\n  return `${String(m).padStart(2, \"0\")}:${String(s).padStart(2, \"0\")}`;\n});\n\n/* Computeds */\nconst totalQuestions = computed(() =>\n  currentVariant.value ? currentVariant.value.questions.length : 25\n);\nconst currentQuestion = computed(\n  () => currentVariant.value?.questions[currentQuestionIndex.value] ?? null\n);\n\nconst score = computed(() => {\n  if (!currentVariant.value) return 0;\n  let s = 0;\n  for (const q of currentVariant.value.questions) {\n    if (selectedAnswers.value[q.id] === q.correct) s++;\n  }\n  return s;\n});\nconst percentage = computed(() =>\n  Math.round((score.value / totalQuestions.value) * 100)\n);\n\n/* Actions */\nfunction selectVariant(variant: Variant) {\n  currentVariant.value = variant;\n  currentQuestionIndex.value = 0;\n  selectedAnswers.value = {};\n  showResult.value = false;\n  startTimer();\n}\n\nfunction restartSameVariant() {\n  if (!currentVariant.value) return;\n  selectedAnswers.value = {};\n  currentQuestionIndex.value = 0;\n  showResult.value = false;\n  timeLeft.value = TOTAL_SECONDS;\n  startTimer();\n}\n\nfunction chooseAnswer(questionId: number, optionIndex: number) {\n  if (showResult.value) return;\n\n  if (selectedAnswers.value[questionId] !== undefined) return;\n\n  selectedAnswers.value = {\n    ...selectedAnswers.value,\n    [questionId]: optionIndex,\n  };\n}\nfunction optionClass(q: Question, i: number) {\n  const sel = selectedAnswers.value[q.id];\n  if (sel == null) return \"hover:bg-gray-50 border-gray-200\";\n  if (sel === i) {\n    if (i === q.correct) return \"bg-green-100 border-green-400 border\";\n    else return \"bg-red-100 border-red-400 border\";\n  }\n  return \"border-gray-200 bg-white opacity-80\";\n}\nfunction goToQuestion(idx: number) {\n  currentQuestionIndex.value = idx;\n}\nfunction paginationClass(q: Question, idx: number) {\n  const sel = selectedAnswers.value[q.id];\n  if (idx === currentQuestionIndex.value) {\n    return \"bg-blue-500 text-white border-blue-600\";\n  }\n  if (sel != null) {\n    return \"bg-gray-300 border-gray-400\";\n  }\n  return \"bg-white border-gray-200 hover:bg-gray-50\";\n}\nfunction finishTest(timeUp = false) {\n  if (showResult.value) return;\n  stopTimer();\n  if (timeUp) {\n    timeUpModal.value = true;\n  } else {\n    showResult.value = true;\n  }\n}\nfunction backToVariants() {\n  stopTimer();\n  currentVariant.value = null;\n  currentQuestionIndex.value = 0;\n  selectedAnswers.value = {};\n  showResult.value = false;\n  timeUpModal.value = false;\n}\n// startTimer();\n</script>\n"],"names":["_"],"mappings":"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"}